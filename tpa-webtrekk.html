<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="tpa-webtrekk-loader.html">
<link rel="import" href="../iron-signals/iron-signals.html">

<!--

`tpa-webtrekk` is for connecting your applications web analytics iron-signal events to WebTrekk

    <tpa-webtrekk></tpa-webtrekk>

Example:

    <tpa-webtrekk></tpa-webtrekk>

@element tpa-webtrekk
@demo demo/index.html
-->
<dom-module id="tpa-webtrekk">
    <template>

        <iron-signals on-iron-signal-businessmonitoring-send-page-visit="onPageVisit"></iron-signals>
        <iron-signals on-iron-signal-businessmonitoring-send-action="onAction"></iron-signals>
        <iron-signals on-iron-signal-businessmonitoring-send-error-message="onErrorMessage"></iron-signals>
        <iron-signals on-iron-signal-businessmonitoring-send-form-step="onFormStep"></iron-signals>
        <iron-signals on-iron-signal-businessmonitoring-send-search-action="onSearchAction "></iron-signals>

    </template>
</dom-module>
<script>

    (function() {

        webtrekkConfig = {
            trackId: "105490315397978", //this might be different per app/country/...
            trackDomain: "mon.ingservices.nl", //this might be different per app/country/...
            domain: "www.tpabootstrap.net", //this might be different per app/country/...
            cookie: "1",
            tabBrowsing: true,
            execCDB: false,
            execRTA: false,
            heatmap: 0
        };

        /**
         * The initialized WebTrekk class for communicating events
         */
        var wt = new webtrekkV3({
            linkTrack: "link",
            linkTrackAttribute: "id",
            heatmap: "1",
            linkTrackDownloads: "zip;pdf;doc"
        });

        Polymer({

            is: "tpa-webtrekk",

            onPageVisit: function (data) {
                wt.contentId = "tpa:" + data.detail.category + ":" + data.detail.pagename;
                wt.sendinfo();
            },

            onAction: function (data) {
                wt.sendinfo({linkId: data.detail.action});
            }


        })
    })();
</script>